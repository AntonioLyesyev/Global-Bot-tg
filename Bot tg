import requests
from pprint import pprint

WEATHER_API_KEY = 'ff3085cd1c0a0495aabed1b60b72c7cb'  # Inserisci qui il tuo API key per OpenWeatherMap
NEWS_API_KEY = '15e786da087c46db9345fa275ed30e44'        # Inserisci qui il tuo API key per NewsAPI

def get_weather():
    city = input("Inserisci una citta': ")
    base_url = f"http://api.openweathermap.org/data/2.5/weather?appid={WEATHER_API_KEY}&q={city}&units=metric&lang=it"
    
    try:
        weather_data = requests.get(base_url).json()
        
        if weather_data.get('cod') != 200:
            print(f"Errore: {weather_data.get('message')}")
        else:
            print(f"Previsioni meteo per {city}:")
            weather_values = {
                'Descrizione': weather_data['weather'][0]['description'],
                'Temperatura': f"{weather_data['main']['temp']}°C",
                'Temperatura_Massima':f"{weather_data['main']['temp_max1']}°C",
                'Temperatura_Minima':f"{weather_data['main']['temp_min']}°C",
                'Umidità': f"{weather_data['main']['humidity']}%",
                'Pressione': f"{weather_data['main']['pressure']} hPa",
                'Vento': f"{weather_data['wind']['speed']} m/s"
            }
            for key, value in weather_values.items():
                print(f"{key}={value}")
    except Exception as e:
        print(f"Si è verificato un errore: {e}")

def get_latest_news():
    base_url = f"https://newsapi.org/v2/top-headlines?country=us&apiKey={NEWS_API_KEY}"
    
    news_data = requests.get(base_url).json()
    
    if news_data.get('status') != 'ok':
        print(f"Errore: {news_data.get('message')}")
    else:
        # Itera su ciascuna notizia nell'elenco
        for news in news_data['articles']:
            # Formatta l'output per ogni notizia
            output = f"Titolo: {news['title']}\n" \
                     f"URL: {news['url']}\n" \
                     f"Contenuto: {news['content']}\n" \
                     f"Descrizione: {news['description']}\n" \
                     f"Data di pubblicazione: {news['publishedAt']}\n" \
                     f"Fonte: {news['source']['name']}"
            
            # Stampa l'output della notizia
            print(output)
            # Aggiungi una linea vuota tra le notizie per una migliore leggibilità
            print()

# Esegui la funzione per ottenere tutte le notizie
get_latest_news()

def main():
    print("Scegli un'azione:")
    print("1. Ottieni le previsioni meteo")
    print("2. Ottieni le ultime notizie")
    
    choice = input("Inserisci 1 o 2: ")
    
    if choice == '1':
        get_weather()
    elif choice == '2':
        get_latest_news()
    else:
        print("Scelta non valida. Riprova.")

# Esegui la funzione main direttamente
main()
